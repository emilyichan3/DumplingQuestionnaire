{% extends "base.html" %}

{% block additional_js %}
    <!-- <script src="/static/javascript/questionnaire-script.js"></script> -->
    <!-- <script src="/static/javascript/questionnaire-data.js"></script> -->
     <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
{% endblock %}

{% block main %}
<!-- dictionary -->
{% for answer in answers.values() %}
<div>
    <ul>
        <li>Questionnaire: {{ answer.question }}</li>
        <li>Answers: {{ answer.questionnaire_answers }}</li>
        <li>Answers: {{ answer.questionnaire_answers | length}}</li>
        <li>Counts: {{ answer.count }}</li>
        <li>{{ answer.count.keys() | list }}</li>
        <li>{{ answer.count.values() | list }}</li>
        <!-- {% for value in answer.questionnaire_answers %}
        <li>{{ value }}</li>
        {% endfor %} -->

        <canvas id="pieChart-{{ answer.questionnaire_id }}" class="layout-pieChart"></canvas>
        <script>
            var ctx = document.getElementById("pieChart-{{ answer.questionnaire_id }}").getContext("2d");
            var pieChart = new Chart(ctx, {
                    type: "pie",
                    data: {
                        labels: {{ answer.count.keys() | list | safe }},
                        datasets: [{
                            textinfo: "label+percent",
                            backgroundColor: barColors,
                            data: {{ answer.count.values() | list | safe }}
                        }]
                    },
                    options: {
                        responsive: false,
                        plugins: {
                            title: {
                            display: true,
                            text: "{{ answer.question }}"
                            }
                        }
                    }
                });        
        </script>
    </ul>
</div>
{% endfor %}
{% endblock %}